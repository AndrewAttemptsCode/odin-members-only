<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Members Club</title>
</head>
<body>
  <header>
    <h1>Members Club</h1>
    <%- include('partials/userauth') %>
  </header>

  <main>
    <h1>Message Board</h1>

    <div>
      <% if (user) { %>
        <% messages.forEach(message => { %>
          <div>
            <%= message.username %>
            <%= message.title %>
            <%= message.text %>
            <%= message.dateFormatted %>
            <% if (!user.admin) { %>
              <a href="/auth/deleteMessage/<%= message.id %>">Delete</a>
            <% }; %>
          </div>
        <% }); %>
        <a href="/create-message">Create Message</a>
      <% } else { %>
        <% messages.forEach(message => { %>
          <div>
            <%= message.title %>
            <%= message.text %>
          </div>
        <% }); %>
      <% }; %>
    </div>
    
  </main>
  
</body>
</html>

<!-- 
add the ability to delete messages, 
but only allow users who have admin == true
to see the delete-button and delete messages.

create isadmin middleware for the delete route
- checks if logged in with isAuth and isAdmin
- maybe allow admin not to be in club to see who posted

add a way to actually mark a user as 
an ‘admin’ so either add another secret pass-code 
page, or just put an “is admin” checkbox on the 
sign-up form. -->